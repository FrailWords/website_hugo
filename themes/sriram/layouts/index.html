{{ define "main" }}
  {{ $paginator := .Paginate (where .Site.RegularPages "Type" "in" .Site.Params.mainSections) }}
  
  <ul class="post-list">
    {{ range $paginator.Pages }}
    <li class="post-item">
      <h2 class="post-item-title">
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </h2>
      <div class="post-item-meta">
        <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date.Format "January 2, 2006" }}</time>
        {{ with .Params.tags }}
          · {{ range first 2 . }}<a href="{{ "/tags/" | relURL }}{{ . | urlize }}">#{{ . }}</a> {{ end }}
        {{ end }}
      </div>
      {{ if .Summary }}
      <p class="post-item-excerpt">{{ .Summary | truncate 150 }}</p>
      {{ end }}
    </li>
    {{ end }}
  </ul>
  
  {{ if gt $paginator.TotalPages 1 }}
  <nav class="pagination">
    {{ if $paginator.HasPrev }}
      <a href="{{ $paginator.Prev.URL }}">← Newer</a>
    {{ end }}
    <span class="current">{{ $paginator.PageNumber }} / {{ $paginator.TotalPages }}</span>
    {{ if $paginator.HasNext }}
      <a href="{{ $paginator.Next.URL }}">Older →</a>
    {{ end }}
  </nav>
  {{ end }}
{{ end }}
